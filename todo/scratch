# ARG http_proxy
# ARG https_proxy
# ARG no_proxy
# # ENV http_proxy ${http_proxy}
# # ENV https_proxy ${https_proxy}
# # ENV no_proxy ${no_proxy}




+  agent {
+    dockerfile { 
+        dir 'containers/app/' 
+        args '-e inventory_store=${inventory_store} -e inventory_store_key=${inventory_store_key}'
+      }
+  }







### SCRATCH

# FROM ubuntu:14.04
# FROM registry.svs.nonprod.uscis.dhs.gov/java:8
# FROM uscis-vis-nonprod.dkr.ecr.us-east-1.amazonaws.com/vis/gradle:latest
# FROM registry.svs.nonprod.uscis.dhs.gov/gradle:latest
# FROM registry.svs.nonprod.uscis.dhs.gov/ruby2.3:latest
FROM java:8



Data to pull old cases:

EMPLOYEE_DECISION
DOCUMENT_DETAILS
ADDITIONAL_DETAILS
CASE_STATUS

Then, these tables will allow them to run the cases through their logic engine (so should be done next as possible):

PCS_RESPONSE
PCS_EMPLOYMENT_RESPONSE
PCS_DOCUMENT_RESPONSE
SSA_RESPONSE




// docker-compose run \
          //   -e http_proxy=${http_proxy} \
          //   -e https_proxy=${https_proxy} \
          //   -e no_proxy=${no_proxy} \
          //   -e inventory_store=${inventory_store} \
          //   -e inventory_store_key=${inventory_store_key} \
          //   -e MIGRATE_ENV=${MIGRATE_ENV} \
          //   -e PG_HOSTNAME=${PG_HOSTNAME} \
          //   -e PG_PORT=${PG_PORT} \
          //   -e PG_DBNAME=${PG_DBNAME} \
          //   -e PG_USERNAME=${PG_USERNAME} \
          //   -e PG_PASSWORD=${PG_PASSWORD} \
          //   -e PG_VIS_SCHEMA=${PG_VIS_SCHEMA} \
          //   -e PG_MOD_SCHEMA=${PG_MOD_SCHEMA} \
          //   -e PG_WORK_SCHEMA=${PG_WORK_SCHEMA} \
          //   app
          '''
          docker-compose run \
            -e http_proxy=${http_proxy} \
            -e https_proxy=${https_proxy} \
            -e no_proxy=${no_proxy} \
            -e MIGRATE_ENV=${MIGRATE_ENV} \
            -e PG_HOSTNAME=${PG_HOSTNAME} \
            -e PG_PORT=${PG_PORT} \
            -e PG_DBNAME=${PG_DBNAME} \
            -e PG_USERNAME=${PG_USERNAME} \
            -e PG_PASSWORD=${PG_PASSWORD} \
            -e PG_VIS_SCHEMA=${PG_VIS_SCHEMA} \
            -e PG_MOD_SCHEMA=${PG_MOD_SCHEMA} \
            -e PG_WORK_SCHEMA=${PG_WORK_SCHEMA} \
            int_tests



            docker run \
            -e http_proxy=http://10.236.225.15:80 \
            -e https_proxy=http://10.236.225.15:80/ \
            -e no_proxy=no_proxy='no_proxy nexus-gss.uscis.dhs.gov,uscis.dhs.gov,169.254.169.254,s3.amazonaws.com,localhost,127.0.0.1,.consul' \
            -e MIGRATE_ENV=${MIGRATE_ENV} \
            -e inventory_store=${inventory_store} \
            -e inventory_store_key=${inventory_store_key} \
            -t etl-app



SELECT distinct(cevl.event_code)
  FROM local_vis_views.cps_case_header ch
       JOIN local_vis_views.cps_case_event_log cevl ON (ch.case_nbr = cevl.case_nbr)
WHERE organization_ind = 'E'

'PHOTO_MATCH'
'INIT_DHS_TNC_WO_DHS_REVERIFY'
'RESOLVE_ADDITIONAL'
'SSA_DISPOSITION'
'INIT_SSA_TNC_WO_SSA_REVERIFY'
'EMP_NO_SHOW'
'SSA_RESUBMITTAL'
'SSA_AUTO_RESUBMITTAL'
'DHS_REVERIFY'
'CONT_DUP_NO_CHANGES'
'CONT_DUP_WITH_CHANGES'
'SSA_REVERIFY'
'CONT_SSA_REVRF_DUP_NO_CHGS'
'RESOLVE_3RD_STEP'
'ADDITIONAL_VERIF'
'SSA_ABANDONED'
'ADVANCE_CASE'
'INITIAL_VERIF'

- MOD.case_event_log_code

'SSA Abandoned'
'FCO Bulk Case Reroute'
'Case Reroute'
'Advancing Case Using Web Services Portal'
'Continue duplicate case with changes.'
'Continue duplicate case without changes.'
'Continue SSA Reverify duplicate case with changes.'
'Continue SSA Reverify duplicate case without changes.'
'SSA Auto Resubmittal'
'DHS Sevis Resubmittal'
'Employer No Show'
'Initial Verif resulting in SSA TNC when no data changes made when SSA Reverify screen is displayed.'
'Initial Verification'
'SSA Reverify/Pre TNC'
'SSA Resubmittal'
'DHS Reverify/Resubmittal'
'Additional Verif'
'Refer to 3rd Step'
'Resolve Additional'
'Resolve 3rd Step'
'SSA Disposition'
'Close Case'
'Refer to SSA'
'Photo Match'
'UNKNOWN'
'Initial Verif resulting in DHS TNC when no data changes made when DHS Reverify screen is displayed.'


Event List

Draft Created
Case Updated
Case Submitted
PCS SSA Query Success/Failure
Photo Matched
Scan and Upload
Case Referred to DHS / SSA
DHS Response received
SSA Response received
Case Closed